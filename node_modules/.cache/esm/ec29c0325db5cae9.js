let mongoose,StudentSchema;_5db‍.x([["addNewStudent",()=>addNewStudent],["getStudent",()=>getStudent],["getStudentById",()=>getStudentById],["updateStudent",()=>updateStudent],["deleteStudent",()=>deleteStudent]]);_5db‍.w("mongoose",[["default",["mongoose"],function(v){mongoose=v}]]);_5db‍.w("../models/students",[["StudentSchema",["StudentSchema"],function(v){StudentSchema=v}]]);

const Student = mongoose.model('Student', StudentSchema);

       const addNewStudent =(req,res)=>{
    let newStudent = new Student(req.body);
    newStudent.save((err, student) => {
        if (err) {
            return res.send(404, `we have a problem with db ${err}`);
        }
        res.json(student);
    });
};
       const getStudent = (req, res) => {
    Student.find({}, (err, student) => {
        if (err) {
            return res.send(404, `we have problem with db ${err}`);
        }
        res.json(student);
    });

}
       const getStudentById = (req, res) => {
    Student.findById(req.params.studentID, (err, student) => {
        if (err) {
            return res.send(404, `we have problem with db ${err}`);
        }
        res.json(student);
    });
}

       const updateStudent = (req, res) => {
    Student.findOneAndUpdate({ _id: req.params.studentID}, req.body, { new: true, useFindAndModify: false }, (err, student) => {
        if (err) {
            return res.send(404, `we have problem with db ${err}`);
        }
        res.json(student);
    });
}

       const deleteStudent = (req, res) => {
    Student.remove({ _id: req.params.studentID}, (err, student) => {
        if (err) {
            return res.send(404, `we have problem with db ${err}`);
        }
        res.json({ message: 'successfuly deleted student'});
    });
}
